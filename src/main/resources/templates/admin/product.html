<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Admin Product Page</title>
    <link rel="stylesheet" th:href="@{/assets/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/assets/css/style.css}">
    <link rel="stylesheet" th:href="@{/assets/css/fontsize.css}">
    <link
            rel="stylesheet"
            th:href="@{/assets/css/plugins/magnific-popup/magnific-popup.css}"
    />
    <meta
            name="theme-color"
            content="#ffffff"
    />
    <meta
            name="msapplication-config"
            content="assets/images/icons/browserconfig.xml"
    />
</head>
<body class="bg-light">
<div class="container mt-4">
    <h2 class="text-primary mb-4">Qu·∫£n l√Ω S·∫£n ph·∫©m</h2>

    <!-- PC TABLE -->
    <div class="mb-5">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h4 class="text-info">Danh s√°ch PC</h4>
            <button type="button" class="btn btn-success btn-sm" onclick="openCreateProductModal('pc')">
                ‚ûï Th√™m PC
            </button>
        </div>

        <table class="table table-bordered table-hover table-light">
            <thead class="table-info">
            <tr>
                <th>ID</th>
                <th>T√™n</th>
                <th>Gi√° (VND)</th>
                <th>H√†nh ƒë·ªông</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="pc : ${pcs.content}">
                <td th:text="${pc.id}"></td>
                <td th:text="${pc.name}"></td>
                <td th:text="${#numbers.formatInteger(pc.price, 0, 'POINT')}"></td>
                <td>
                    <button class="btn btn-info btn-sm"
                            th:attr="data-id=${pc.id}"
                            onclick="viewProductDetailFromList(this, 'pc')">Xem</button>
                    <button class="btn btn-warning btn-sm"
                            th:attr="data-id=${pc.id}"
                            onclick="openEditModalFromList(this, 'pc')">S·ª≠a</button>
                    <form th:action="@{'/admin/product/pc/delete/' + ${pc.id}}" method="post"
                          onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën xo√° pc n√†y kh√¥ng?');"
                          style="display: inline;">
                        <button type="submit" class="btn btn-sm btn-danger">
                            üóëÔ∏è Xo√°
                        </button>
                        <!--                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />-->
                    </form>
                </td>
            </tr>
            </tbody>
        </table>

        <!-- Pagination PC -->
        <nav aria-label="Page navigation" th:if="${pcs.totalElements > 0}">
            <ul class="pagination justify-content-center">

                <!-- Prev button -->
                <li class="page-item" th:classappend="${!pcs.hasPrevious()} ? 'disabled'">
                    <a class="page-link page-link-prev"
                       th:href="@{product(pcPage=${pcs.number - 1}, computerItemPage=${computerItems.number})}"
                       aria-label="Previous">
                        <span aria-hidden="true"><i class="icon-long-arrow-left"></i></span>Prev
                    </a>
                </li>

                <!-- Page numbers -->
                <li class="page-item"
                    th:each="i : ${#numbers.sequence(0, pcs.totalPages - 1)}"
                    th:classappend="${i == pcs.number} ? 'active'">
                    <a class="page-link"
                       th:href="@{product(pcPage=${i}, computerItemPage=${computerItems.number})}"
                       th:text="${i + 1}">1</a>
                </li>

                <!-- Total pages display -->
                <li class="page-item disabled ms-2">
                    <span class="page-link">of <span th:text="${computerItems.totalPages}">0</span></span>
                </li>

                <!-- Next button -->
                <li class="page-item" th:classappend="${!computerItems.hasNext()} ? 'disabled'">
                    <a class="page-link page-link-next"
                       th:href="@{product(pcPage=${pcs.number + 1}, computerItemPage=${computerItems.number})}"
                       aria-label="Next">
                        Next <span aria-hidden="true"><i class="icon-long-arrow-right"></i></span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>

    <!-- COMPUTER ITEM TABLE -->
    <div>
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h4 class="text-info">Danh s√°ch Linh ki·ªán</h4>
            <button type="button" class="btn btn-success btn-sm" onclick="openCreateProductModal('computerItem')">
                ‚ûï Th√™m linh ki·ªán
            </button>
        </div>

        <table class="table table-bordered table-hover table-light">
            <thead class="table-info">
            <tr>
                <th>ID</th>
                <th>T√™n</th>
                <th>Lo·∫°i s·∫£n ph·∫©m</th>
                <th>Gi√° (VND)</th>
                <th>H√†nh ƒë·ªông</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="item : ${computerItems.content}">
                <td th:text="${item.id}"></td>
                <td th:text="${item.name}"></td>
                <td th:text="${item.category?.name} ?: ''"></td>
                <td th:text="${#numbers.formatInteger(item.price, 0, 'POINT')}"></td>
                <td>
                    <button class="btn btn-info btn-sm"
                            th:attr="data-id=${item.id}"
                            onclick="viewProductDetailFromList(this, 'computerItem')">Xem</button>
                    <button class="btn btn-warning btn-sm"
                            th:attr="data-id=${item.id}"
                            onclick="openEditModalFromList(this, 'computerItem')">S·ª≠a</button>
                    <form th:action="@{'/admin/product/item/delete/' + ${item.id}}" method="post"
                          onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën xo√° linh ki·ªán n√†y kh√¥ng?');"
                          style="display: inline;">
                        <button type="submit" class="btn btn-sm btn-danger">
                            üóëÔ∏è Xo√°
                        </button>
<!--                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />-->
                    </form>
                </td>
            </tr>
            </tbody>
        </table>

        <!-- Pagination Items -->
        <nav aria-label="Page navigation" th:if="${computerItems.totalElements > 0}">
            <ul class="pagination justify-content-center">

                <!-- Prev button -->
                <li class="page-item" th:classappend="${!computerItems.hasPrevious()} ? 'disabled'">
                    <a class="page-link page-link-prev"
                       th:href="@{product(pcPage=${pcs.number}, computerItemPage=${computerItems.number - 1})}"
                       aria-label="Previous">
                        <span aria-hidden="true"><i class="icon-long-arrow-left"></i></span>Prev
                    </a>
                </li>

                <!-- Page numbers -->
                <li class="page-item"
                    th:each="i : ${#numbers.sequence(0, computerItems.totalPages - 1)}"
                    th:classappend="${i == computerItems.number} ? 'active'">
                    <a class="page-link"
                       th:href="@{product(pcPage=${pcs.number}, computerItemPage=${i})}"
                       th:text="${i + 1}">1</a>
                </li>

                <!-- Total pages display -->
                <li class="page-item disabled ms-2">
                    <span class="page-link">of <span th:text="${computerItems.totalPages}">0</span></span>
                </li>

                <!-- Next button -->
                <li class="page-item" th:classappend="${!computerItems.hasNext()} ? 'disabled'">
                    <a class="page-link page-link-next"
                       th:href="@{product(pcPage=${pcs.number}, computerItemPage=${computerItems.number + 1})}"
                       aria-label="Next">
                        Next <span aria-hidden="true"><i class="icon-long-arrow-right"></i></span>
                    </a>
                </li>

            </ul>
        </nav>

    </div>
    // Modal for creating new product
    <div class="modal fade" id="modalCreateProduct" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <form id="create-product-form" method="post" class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalCreateProductTitle">Th√™m s·∫£n ph·∫©m</h5>
                    <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
                </div>
                <div class="modal-body" id="modalCreateProductBody">
                    <!-- N·ªôi dung s·∫Ω ƒë∆∞·ª£c JS g√°n ƒë·ªông -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Hu·ª∑</button>
                    <button type="submit" class="btn btn-success">L∆∞u</button>
                </div>
            </form>
        </div>
    </div>

<!--    // Modal for viewing product details-->
    <div class="modal fade" id="modalViewProduct" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content shadow">
                <div class="modal-header bg-info text-white">
                    <h5 class="modal-title" id="modalViewTitle">Chi ti·∫øt s·∫£n ph·∫©m</h5>
                    <button type="button" class="close text-white" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>

                <div class="modal-body px-4 py-3">
                    <div class="container-fluid">
                        <!-- ID + Name -->
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="font-weight-bold">M√£ s·∫£n ph·∫©m</label>
                                <div class="form-control-plaintext border rounded bg-light px-3 py-2" id="view-id"></div>
                            </div>
                            <div class="col-md-6">
                                <label class="font-weight-bold">T√™n</label>
                                <div class="form-control-plaintext border rounded bg-light px-3 py-2" id="view-name"></div>
                            </div>
                        </div>

                        <!-- Category + Price -->
                        <div class="row mb-3" id="row-category-price">
                            <!-- Category (ch·ªâ hi·ªÉn th·ªã v·ªõi ComputerItem) -->
                            <div class="col-md-6" id="view-category-group">
                                <label class="font-weight-bold">Lo·∫°i</label>
                                <div class="form-control-plaintext border rounded bg-light px-3 py-2" id="view-category"></div>
                            </div>

                            <!-- List ComputerItems (ch·ªâ hi·ªÉn th·ªã v·ªõi PC) -->
                            <div class="col-md-6" id="view-computer-items-group" style="display: none;">
                                <label class="font-weight-bold">Linh ki·ªán c·∫•u th√†nh</label>
                                <div class="form-control-plaintext border rounded bg-light px-3 py-2" id="view-computer-items"></div>
                            </div>

                            <!-- Gi√° -->
                            <div class="col-md-6">
                                <label class="font-weight-bold">Gi√° (VND)</label>
                                <div class="form-control-plaintext border rounded bg-light px-3 py-2" id="view-price"></div>
                            </div>
                        </div>

                        <!-- Brand + Model (Only ComputerItem) -->
                        <div class="row mb-3" id="row-brand-model">
                            <div class="col-md-6">
                                <label class="font-weight-bold">Brand</label>
                                <div class="form-control-plaintext border rounded bg-light px-3 py-2" id="view-brand"></div>
                            </div>
                            <div class="col-md-6">
                                <label class="font-weight-bold">Model</label>
                                <div class="form-control-plaintext border rounded bg-light px-3 py-2" id="view-model"></div>
                            </div>
                        </div>

                        <!-- Description -->
                        <div class="row mb-3" id="row-description">
                            <div class="col-12">
                                <label class="font-weight-bold">M√¥ t·∫£</label>
                                <div class="form-control-plaintext border rounded bg-light px-3 py-2" id="view-description" style="white-space: pre-wrap;"></div>
                            </div>
                        </div>

                        <!-- PC: Danh s√°ch linh ki·ªán -->
                        <div class="row mb-3" id="row-computer-items" style="display: none;">
                            <div class="col-12">
                                <label class="font-weight-bold">Danh s√°ch linh ki·ªán</label>
                                <div class="form-control-plaintext border rounded bg-light px-3 py-2" id="view-computer-items"></div>
                            </div>
                        </div>

                        <!-- Image -->
                        <div class="row mt-4">
                            <div class="col-12 text-center" id="view-image">
                                <!-- images inserted here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<!--    // Modal for editing product-->
<!--    <div class="modal fade" id="modalEditProduct" tabindex="-1" role="dialog" aria-hidden="true">-->
<!--        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">-->
<!--            <form id="edit-product-form" method="post" class="modal-content">-->
<!--                <div class="modal-header bg-warning text-white">-->
<!--                    <h5 class="modal-title" id="edit-modal-title">Ch·ªânh s·ª≠a s·∫£n ph·∫©m</h5>-->
<!--                    <button type="button" class="close text-white" data-dismiss="modal"><span>&times;</span></button>-->
<!--                </div>-->

<!--                <div class="modal-body px-4 py-3">-->
<!--                    <div class="container-fluid">-->
<!--                        &lt;!&ndash; Hidden ID &ndash;&gt;-->
<!--                        <input type="hidden" name="id" id="edit-id" />-->

<!--                        &lt;!&ndash; T√™n &ndash;&gt;-->
<!--                        <div class="form-group">-->
<!--                            <label class="font-weight-bold">T√™n</label>-->
<!--                            <input type="text" class="form-control" name="name" id="edit-name" required />-->
<!--                        </div>-->

<!--                        &lt;!&ndash; Gi√° &ndash;&gt;-->
<!--                        <div class="form-group">-->
<!--                            <label class="font-weight-bold">Gi√° (VND)</label>-->
<!--                            <input type="text" class="form-control" id="edit-price-display" />-->
<!--                            <input type="hidden" name="price" id="edit-price" />-->
<!--                        </div>-->

<!--                        &lt;!&ndash; Ch·ªâ d√†nh cho ComputerItem &ndash;&gt;-->
<!--                        <div id="edit-category-group" class="form-group">-->
<!--                            <label class="font-weight-bold">Lo·∫°i s·∫£n ph·∫©m</label>-->
<!--                            <input type="text" class="form-control" name="categoryName" id="edit-category" readonly />-->
<!--                        </div>-->

<!--                        <div id="edit-brand-model-group" class="row">-->
<!--                            <div class="form-group col-md-6">-->
<!--                                <label class="font-weight-bold">Brand</label>-->
<!--                                <input type="text" class="form-control" name="brand" id="edit-brand" />-->
<!--                            </div>-->
<!--                            <div class="form-group col-md-6">-->
<!--                                <label class="font-weight-bold">Model</label>-->
<!--                                <input type="text" class="form-control" name="model" id="edit-model" />-->
<!--                            </div>-->
<!--                        </div>-->

<!--                        &lt;!&ndash; M√¥ t·∫£ &ndash;&gt;-->
<!--                        <div class="form-group">-->
<!--                            <label class="font-weight-bold">M√¥ t·∫£</label>-->
<!--                            <textarea class="form-control" rows="3" name="description" id="edit-description"></textarea>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->

<!--                <div class="modal-footer">-->
<!--                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Hu·ª∑</button>-->
<!--                    <button type="submit" class="btn btn-primary">L∆∞u thay ƒë·ªïi</button>-->
<!--                </div>-->
<!--            </form>-->
<!--        </div>-->
<!--    </div>-->

    <div class="modal fade" id="modalEditProduct" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <form id="edit-product-form" method="post" class="modal-content">
                <div class="modal-header bg-warning text-white">
                    <h5 class="modal-title" id="edit-modal-title">Ch·ªânh s·ª≠a s·∫£n ph·∫©m</h5>
                    <button type="button" class="close text-white" data-dismiss="modal"><span>&times;</span></button>
                </div>

                <!-- Body s·∫Ω ƒë∆∞·ª£c g√°n ƒë·ªông -->
                <div class="modal-body" id="modalEditProductBody">
                    <!-- JS s·∫Ω g√°n form t√πy lo·∫°i s·∫£n ph·∫©m -->
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Hu·ª∑</button>
                    <button type="submit" class="btn btn-primary">L∆∞u thay ƒë·ªïi</button>
                </div>
            </form>
        </div>
    </div>


</div>
<script th:inline="javascript">
    /*<![CDATA[*/
    window.computerItems = [[${computerItems.content}]];
    window.pcs = [[${pcs.content}]];
    window.categories = [[${categories}]];
    /*]]>*/
</script>

<script th:src="@{/assets/js/edit-product.js}"></script>
<script th:src="@{/assets/js/add-product.js}"></script>
<script th:src="@{/assets/js/view-product-detail.js}"></script>
<script th:src="@{/assets/js/jquery.min.js}"></script>
<script th:src="@{/assets/js/bootstrap.bundle.min.js}"></script>
<script th:src="@{/assets/js/jquery.hoverIntent.min.js}"></script>
<script th:src="@{/assets/js/jquery.waypoints.min.js}"></script>
<script th:src="@{/assets/js/superfish.min.js}"></script>
<script th:src="@{/assets/js/owl.carousel.min.js}"></script>
<script th:src="@{/assets/js/bootstrap-input-spinner.js}"></script>
<script th:src="@{/assets/js/jquery.elevateZoom.min.js}"></script>
<script th:src="@{/assets/js/jquery.magnific-popup.min.js}"></script>
<script th:src="@{/assets/js/main.js}"></script>
</body>
</html>