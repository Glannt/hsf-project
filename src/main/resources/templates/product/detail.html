<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="keywords" content="HTML5 Template">
    <meta name="description" content="Molla - Bootstrap eCommerce Template">
    <meta name="author" content="p-themes">
    <title>Product Detail</title>
    <link rel="apple-touch-icon" sizes="180x180" th:href="@{/assets/images/icons/apple-touch-icon.png}">
    <link rel="icon" type="image/png" sizes="32x32" th:href="@{/assets/images/icons/favicon-32x32.png}">
    <link rel="icon" type="image/png" sizes="16x16" th:href="@{/assets/images/icons/favicon-16x16.png}">
    <link rel="manifest" th:href="@{/assets/images/icons/site.html}">
    <link rel="mask-icon" th:href="@{/assets/images/icons/safari-pinned-tab.svg}" color="#666666">
    <link rel="shortcut icon" th:href="@{/assets/images/icons/favicon.ico}">
    <meta name="apple-mobile-web-app-title" content="Molla">
    <meta name="application-name" content="Molla">
    <meta name="msapplication-TileColor" content="#cc9966">
    <meta name="msapplication-config" th:content="@{/assets/images/icons/browserconfig.xml}">
    <meta name="theme-color" content="#ffffff">
    <!-- Plugins CSS File -->
    <link rel="stylesheet" th:href="@{/assets/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/assets/css/plugins/owl-carousel/owl.carousel.css}">
    <link rel="stylesheet" th:href="@{/assets/css/plugins/magnific-popup/magnific-popup.css}">
    <!-- Main CSS File -->
    <link rel="stylesheet" th:href="@{/assets/css/style.css}">
    <link rel="stylesheet" th:href="@{/assets/css/plugins/nouislider/nouislider.css}">
</head>
<body>
<div class="page-wrapper">
    <header class="header">
        <!-- Tùy bạn giữ lại hoặc rút gọn -->
        <div class="header-middle sticky-header">
            <div class="container">
                <div class="header-left">
                    <a href="/" class="logo">
                        <img th:src="@{/assets/images/logo.png}" alt="Logo" width="105" height="25">
                    </a>
                    <nav class="main-nav">
                        <ul class="menu sf-arrows">
                            <li><a th:href="@{/}">Home</a></li>
                            <li><a th:href="@{/products}">Shop</a></li>
                            <li><span th:if="${user != null}" th:text="${user.username}">Guest</span></li>
                        </ul>
                    </nav>
                </div>
                <div class="header-right">
                    <a th:href="@{/cart}" class="icon-shopping-cart">
                        <i class="icon-shopping-cart"></i>
                        <span th:if="${user != null and user.cart != null and user.cart.getItemCount() > 0}" 
                              class="cart-count" th:text="${user.cart.getItemCount()}">0</span>
                    </a>
                </div>
            </div>
        </div>
    </header>
    <main class="main">
        <nav aria-label="breadcrumb" class="breadcrumb-nav border-0 mb-0">
            <div class="container d-flex align-items-center">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                        <a th:href="@{/}">Home</a>
                    </li>
                    <li class="breadcrumb-item">
                        <a th:href="@{/products}">Products</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">
                        Product Detail
                    </li>
                </ol>
            </div>
        </nav>
        <div class="page-content">
            <div class="container">
                <div class="product-details-top">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="product-gallery product-gallery-vertical">
                                <div class="row">
                                    <figure class="product-main-image">
                                        <img
                                                id="product-zoom"
                                                th:if="${productCI != null and productCI.images != null and #lists.size(productCI.images) > 0}"
                                                th:src="@{${productCI.images[0].imageUrl}}"
                                                th:alt="${productCI.name}"
                                                th:attr="data-zoom-image=${productCI.images[0].imageUrl}" />

                                        <img
                                                id="product-zoom"
                                                th:if="${productPC != null and productPC.images != null and #lists.size(productPC.images) > 0}"
                                                th:src="@{${productPC.images[0].imageUrl}}"
                                                th:alt="${productPC.name}"
                                                th:attr="data-zoom-image=${productPC.images[0].imageUrl}" />

                                        <img
                                                th:if="(${productCI == null or productCI.images == null or #lists.size(productCI.images) == 0}) and (${productPC == null or productPC.images == null or #lists.size(productPC.images) == 0})"
                                                th:src="@{/assets/images/no-image.png}"
                                                alt="No image available" />

                                        <a
                                                href="#"
                                                id="btn-product-gallery"
                                                class="btn-product-gallery"
                                        >
                                            <i class="icon-arrows"></i>
                                        </a>
                                    </figure>
                                    <!-- End .product-main-image -->

<!--                                    <div-->
<!--                                            id="product-zoom-gallery"-->
<!--                                            class="product-image-gallery"-->
<!--                                    >-->
<!--                                        <a-->
<!--                                                class="product-gallery-item active"-->
<!--                                                href="#"-->
<!--                                                data-image="assets/images/products/single/1.jpg"-->
<!--                                                data-zoom-image="assets/images/products/single/1-big.jpg"-->
<!--                                        >-->
<!--                                            <img-->
<!--                                                    src="/assets/images/products/single/1-small.jpg"-->
<!--                                                    alt="product side"-->
<!--                                            />-->
<!--                                        </a>-->

<!--                                        <a-->
<!--                                                class="product-gallery-item"-->
<!--                                                href="#"-->
<!--                                                data-image="assets/images/products/single/2.jpg"-->
<!--                                                data-zoom-image="assets/images/products/single/2-big.jpg"-->
<!--                                        >-->
<!--                                            <img-->
<!--                                                    src="/assets/images/products/single/2-small.jpg"-->
<!--                                                    alt="product cross"-->
<!--                                            />-->
<!--                                        </a>-->

<!--                                        <a-->
<!--                                                class="product-gallery-item"-->
<!--                                                href="#"-->
<!--                                                data-image="assets/images/products/single/3.jpg"-->
<!--                                                data-zoom-image="assets/images/products/single/3-big.jpg"-->
<!--                                        >-->
<!--                                            <img-->
<!--                                                    src="/assets/images/products/single/3-small.jpg"-->
<!--                                                    alt="product with model"-->
<!--                                            />-->
<!--                                        </a>-->

<!--                                        <a-->
<!--                                                class="product-gallery-item"-->
<!--                                                href="#"-->
<!--                                                data-image="assets/images/products/single/4.jpg"-->
<!--                                                data-zoom-image="assets/images/products/single/4-big.jpg"-->
<!--                                        >-->
<!--                                            <img-->
<!--                                                    src="/assets/images/products/single/4-small.jpg"-->
<!--                                                    alt="product back"-->
<!--                                            />-->
<!--                                        </a>-->
<!--                                    </div>-->
<!--                                    <div id="product-zoom-gallery" class="product-image-gallery">-->
<!--                                        &lt;!&ndash; For productCI &ndash;&gt;-->
<!--                                        <a class="product-gallery-item"-->
<!--                                           th:each="img : ${productCI.images}"-->
<!--                                           th:if="${productCI != null}"-->
<!--                                           th:href="@{#}"-->
<!--                                           th:attr="data-image=${img.imageUrl}, data-zoom-image=${img.imageUrl}">-->
<!--                                            <img th:src="@{${img.imageUrl}}" th:alt="${img.altText}" />-->
<!--                                        </a>-->
<!--                                        &lt;!&ndash; For productPC &ndash;&gt;-->
<!--                                        <a class="product-gallery-item"-->
<!--                                           th:each="img : ${productPC.images}"-->
<!--                                           th:if="${productPC != null}"-->
<!--                                           th:href="@{#}"-->
<!--                                           th:attr="data-image=${img.imageUrl}, data-zoom-image=${img.imageUrl}">-->
<!--                                            <img th:src="@{${img.imageUrl}}" th:alt="${img.altText}" />-->
<!--                                        </a>-->
<!--                                    </div>-->
                                    <!-- End .product-image-gallery -->
                                </div>
                                <!-- End .row -->
                            </div>
                            <!-- End .product-gallery -->
                        </div>
                        <!-- End .col-md-6 -->

                        <div class="col-md-6">
                            <div class="product-details">
                                <form
                                        th:action="@{/cart/add}"
                                        method="post"
                                        class="product-details-form">
                                <h1 class="product-title" th:text="${productCI != null} ? ${productCI.name} : ${productPC.name}">Product Name</h1>
                                <!-- End .product-title -->

                                <div class="ratings-container">
                                    <div class="ratings">
                                        <div
                                                class="ratings-val"
                                                style="width: 80%"
                                        ></div>
                                        <!-- End .ratings-val -->
                                    </div>
                                    <!-- End .ratings -->
                                    <a
                                            class="ratings-text"
                                            href="#product-review-link"
                                            id="review-link"
                                    >( 2 Reviews )</a
                                    >
                                </div>
                                <!-- End .rating-container -->

                                <div class="product-price" th:text="${productCI != null} ? ${productCI.price} : ${productPC.price}">$0.00</div>

                                <!-- End .product-price -->

                                <div class="product-content">
                                    <p th:text="${productCI != null} ? ${productCI.description} : ${productPC.description}">Description</p>
                                </div>

                                <!-- End .product-content -->


                                <div class="details-filter-row details-row-size">
                                    <label for="qty">Qty:</label>
                                    <div class="product-details-quantity">
                                        <input
                                                type="number"
                                                id="qty"
                                                name="quantity"
                                                class="form-control"
                                                value="1"
                                                min="1"
                                                max="10"
                                                step="1"
                                                data-decimals="0"
                                                required
                                        />
                                    </div>
                                    <!-- End .product-details-quantity -->
                                </div>
                                <!-- End .details-filter-row -->

                                <div class="product-details-action">

                                        <input type="hidden" name="productId" th:value="${productCI != null} ? ${productCI.id} : ${productPC.id}" />
                                        <input type="hidden" name="cartId" th:value="${user.cart.getId()}" />
                                        <button type="submit" class="btn-product btn-cart">
                                            <span>Add to Cart</span>
                                        </button>
                                        <a th:href="@{/cart}" class="btn-product btn-cart" style="background-color: #6c757d; margin-left: 10px;">
                                            <span>View Cart</span>
                                        </a>

                                </div>
                                <!-- End .product-details-action -->
                                </form>
                                <div class="product-details-footer">
                                    <div class="product-cat">
                                        <span>Category:</span>
                                        <a href="#">Women</a>, <a href="#">Dresses</a>,
                                        <a href="#">Yellow</a>
                                    </div>
                                    <!-- End .product-cat -->

                                    <div class="social-icons social-icons-sm">
                                        <span class="social-label">Share:</span>
                                        <a
                                                href="#"
                                                class="social-icon"
                                                title="Facebook"
                                                target="_blank"
                                        ><i class="icon-facebook-f"></i
                                        ></a>
                                        <a
                                                href="#"
                                                class="social-icon"
                                                title="Twitter"
                                                target="_blank"
                                        ><i class="icon-twitter"></i
                                        ></a>
                                        <a
                                                href="#"
                                                class="social-icon"
                                                title="Instagram"
                                                target="_blank"
                                        ><i class="icon-instagram"></i
                                        ></a>
                                        <a
                                                href="#"
                                                class="social-icon"
                                                title="Pinterest"
                                                target="_blank"
                                        ><i class="icon-pinterest"></i
                                        ></a>
                                    </div>
                                </div>
                                <!-- End .product-details-footer -->
                            </div>
                            <!-- End .product-details -->
                        </div>
                        <!-- End .col-md-6 -->
                    </div>
                    <!-- End .row -->
                </div>
                <div
                        class="owl-carousel owl-simple carousel-equal-height carousel-with-shadow"
                        data-toggle="owl"
                        data-owl-options='{
                            "nav": false,
                            "dots": true,
                            "margin": 20,
                            "loop": false,
                            "responsive": {
                                "0": {
                                    "items":1
                                },
                                "480": {
                                    "items":2
                                },
                                "768": {
                                    "items":3
                                },
                                "992": {
                                    "items":4
                                },
                                "1200": {
                                    "items":4,
                                    "nav": true,
                                    "dots": false
                                }
                            }
                        }'
                >

                </div>
            </div>
        </div>
    </main>
    <footer class="footer">
        <div class="footer-middle">
            <div class="container">
                <div class="row">
                    <div class="col-sm-6 col-lg-3">
                        <div class="widget widget-about">
                            <img src="assets/images/logo.png" class="footer-logo" alt="Footer Logo" width="105"
                                 height="25">
                            <p>Praesent dapibus, neque id cursus ucibus, tortor neque egestas augue, eu vulputate magna
                                eros eu erat. </p>

                            <div class="social-icons">
                                <a href="#" class="social-icon" target="_blank" title="Facebook"><i
                                        class="icon-facebook-f"></i></a>
                                <a href="#" class="social-icon" target="_blank" title="Twitter"><i
                                        class="icon-twitter"></i></a>
                                <a href="#" class="social-icon" target="_blank" title="Instagram"><i
                                        class="icon-instagram"></i></a>
                                <a href="#" class="social-icon" target="_blank" title="Youtube"><i
                                        class="icon-youtube"></i></a>
                                <a href="#" class="social-icon" target="_blank" title="Pinterest"><i
                                        class="icon-pinterest"></i></a>
                            </div><!-- End .soial-icons -->
                        </div><!-- End .widget about-widget -->
                    </div><!-- End .col-sm-6 col-lg-3 -->

                    <div class="col-sm-6 col-lg-3">
                        <div class="widget">
                            <h4 class="widget-title">Useful Links</h4><!-- End .widget-title -->

                            <ul class="widget-list">
                                <li><a href="about.html">About Molla</a></li>
                                <li><a href="#">How to shop on Molla</a></li>
                                <li><a href="#">FAQ</a></li>
                                <li><a href="contact.html">Contact us</a></li>
                                <li><a href="login.html">Log in</a></li>
                            </ul><!-- End .widget-list -->
                        </div><!-- End .widget -->
                    </div><!-- End .col-sm-6 col-lg-3 -->

                    <div class="col-sm-6 col-lg-3">
                        <div class="widget">
                            <h4 class="widget-title">Customer Service</h4><!-- End .widget-title -->

                            <ul class="widget-list">
                                <li><a href="#">Payment Methods</a></li>
                                <li><a href="#">Money-back guarantee!</a></li>
                                <li><a href="#">Returns</a></li>
                                <li><a href="#">Shipping</a></li>
                                <li><a href="#">Terms and conditions</a></li>
                                <li><a href="#">Privacy Policy</a></li>
                            </ul><!-- End .widget-list -->
                        </div><!-- End .widget -->
                    </div><!-- End .col-sm-6 col-lg-3 -->

                    <div class="col-sm-6 col-lg-3">
                        <div class="widget">
                            <h4 class="widget-title">My Account</h4><!-- End .widget-title -->

                            <ul class="widget-list">
                                <li><a href="#">Sign In</a></li>
                                <li><a href="cart.html">View Cart</a></li>
                                <li><a href="#">My Wishlist</a></li>
                                <li><a href="#">Track My Order</a></li>
                                <li><a href="#">Help</a></li>
                            </ul><!-- End .widget-list -->
                        </div><!-- End .widget -->
                    </div><!-- End .col-sm-6 col-lg-3 -->
                </div><!-- End .row -->
            </div><!-- End .container -->
        </div><!-- End .footer-middle -->

        <div class="footer-bottom">
            <div class="container">
                <p class="footer-copyright">Copyright © 2019 Molla Store. All Rights Reserved.</p>
                <!-- End .footer-copyright -->
                <figure class="footer-payments">
                    <img th:src="@{/assets/images/payments.png}" alt="Payment methods" width="272" height="20">
                </figure><!-- End .footer-payments -->
            </div><!-- End .container -->
        </div><!-- End .footer-bottom -->
    </footer><!-- End .footer -->
</div>
<button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>
<script th:src="@{/assets/js/bootstrap.bundle.min.js}"></script>
<script th:src="@{/assets/js/jquery.hoverIntent.min.js}"></script>
<script th:src="@{/assets/js/jquery.waypoints.min.js}"></script>
<script th:src="@{/assets/js/superfish.min.js}"></script>
<script th:src="@{/assets/js/owl.carousel.min.js}"></script>
<script th:src="@{/assets/js/bootstrap-input-spinner.js}"></script>
<script th:src="@{/assets/js/jquery.elevateZoom.min.js}"></script>
<script th:src="@{/assets/js/bootstrap-input-spinner.js}"></script>
<script th:src="@{/assets/js/jquery.magnific-popup.min.js}"></script>
<!-- Main JS File -->
<script th:src="@{/assets/js/main.js}"></script>
</body>
</html>